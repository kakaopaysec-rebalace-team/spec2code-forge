#!/bin/bash

echo "ğŸ³ Docker í™˜ê²½ ì—…ë°ì´íŠ¸ ë¬¸ì œ í•´ê²° ê°€ì´ë“œ"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"

echo "ğŸ“‹ ì²´í¬ë¦¬ìŠ¤íŠ¸:"

echo ""
echo "1. ğŸ“¥ Git Pull í™•ì¸"
echo "   - ì„œë²„ì—ì„œ ë‹¤ìŒ ëª…ë ¹ì–´ ì‹¤í–‰:"
echo "     git log --oneline -5"
echo "     git status"
echo ""

echo "2. ğŸ³ Docker ìºì‹œ ì™„ì „ ì‚­ì œ"
echo "   - ê¸°ì¡´ ì´ë¯¸ì§€ì™€ ì»¨í…Œì´ë„ˆ ì‚­ì œ:"
echo "     docker stop \$(docker ps -aq)"
echo "     docker rm \$(docker ps -aq)"
echo "     docker rmi \$(docker images -q)"
echo "     docker system prune -af --volumes"
echo ""

echo "3. ğŸ”¨ Docker Build ì˜µì…˜"
echo "   - ìºì‹œ ì‚¬ìš© ì•ˆí•¨ìœ¼ë¡œ ë¹Œë“œ:"
echo "     docker build --no-cache -t your-app-name ."
echo "   - ë˜ëŠ” BuildKit ì‚¬ìš©:"
echo "     DOCKER_BUILDKIT=1 docker build --no-cache -t your-app-name ."
echo ""

echo "4. ğŸ“ .dockerignore í™•ì¸"
echo "   - node_modules, .git, *.log ë“±ì´ ì œì™¸ë˜ëŠ”ì§€ í™•ì¸"
echo "   - ì¤‘ìš”í•œ ì†ŒìŠ¤ íŒŒì¼ì´ ë¬´ì‹œë˜ì§€ ì•ŠëŠ”ì§€ í™•ì¸"
echo ""

echo "5. ğŸ”„ Multi-stage Build ìºì‹œ"
echo "   - ê° ë‹¨ê³„ë³„ë¡œ ìºì‹œê°€ ì˜¬ë°”ë¥¸ì§€ í™•ì¸"
echo "   - ì˜ì¡´ì„± íŒŒì¼(package.json, requirements.txt) ë³€ê²½ ì‹œê¸° í™•ì¸"
echo ""

echo "6. ğŸŒ ë¸Œë¼ìš°ì € ìºì‹œ"
echo "   - ë¸Œë¼ìš°ì €ì—ì„œ ê°•ë ¥ ìƒˆë¡œê³ ì¹¨: Ctrl+Shift+R (ë˜ëŠ” Cmd+Shift+R)"
echo "   - ê°œë°œìë„êµ¬ì—ì„œ 'ë„¤íŠ¸ì›Œí¬' íƒ­ì—ì„œ 'Disable cache' ì²´í¬"
echo ""

echo "7. ğŸ“¦ Node.js ë¹Œë“œ ìºì‹œ"
echo "   - í”„ë¡ íŠ¸ì—”ë“œ ë¹Œë“œ ìºì‹œ ì‚­ì œ:"
echo "     rm -rf node_modules/.cache"
echo "     rm -rf .next (Next.jsì¸ ê²½ìš°)"
echo "     rm -rf dist"
echo ""

echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "ğŸ”§ ë¹ ë¥¸ í•´ê²° ëª…ë ¹ì–´ ìˆœì„œ:"
echo "1. docker stop \$(docker ps -aq) 2>/dev/null"
echo "2. docker system prune -af --volumes"
echo "3. git pull origin main"
echo "4. docker build --no-cache -t your-app ."
echo "5. docker run -p 8080:8080 your-app"
echo ""

echo "ğŸ’¡ ì¶”ê°€ í™•ì¸ ì‚¬í•­:"
echo "- Docker ì»¨í…Œì´ë„ˆ ë‚´ë¶€ íŒŒì¼ì´ ì‹¤ì œë¡œ ì—…ë°ì´íŠ¸ë˜ì—ˆëŠ”ì§€:"
echo "  docker exec -it container_name ls -la /app/src/pages/"
echo ""
echo "- ì»¨í…Œì´ë„ˆ ë¡œê·¸ í™•ì¸:"
echo "  docker logs container_name"
echo ""
echo "- í¬íŠ¸ ë§¤í•‘ í™•ì¸:"
echo "  docker ps"